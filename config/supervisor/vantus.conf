; Vantus Systems - Supervisor program definition
; Intended install location (example): /etc/supervisor/conf.d/vantus.conf
;
; Note: This is provided for future use. You said systemd is the primary service manager.

[program:vantus]
directory=/var/www/crispy-fishstick

; Start the Next.js server (expects `npm install` + `npm run build` already completed)
command=/usr/bin/env npm run start -- --port 3000

; Environment
environment=NODE_ENV="production",PORT="3000",PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

; Process management
user=www-data
autostart=true
autorestart=true
startretries=3
stopsignal=INT
stopwaitsecs=20
killasgroup=true
stopasgroup=true

; Logging
stdout_logfile=/var/log/vantus/vantus.stdout.log
stderr_logfile=/var/log/vantus/vantus.stderr.log
stdout_logfile_maxbytes=50MB
stderr_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_backups=5
