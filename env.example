# ═══════════════════════════════════════════════════════════════════════
#  Vantus Systems - Environment Configuration Template
# ═══════════════════════════════════════════════════════════════════════
#
# IMPORTANT SECURITY NOTICE
# =========================
#
# 1. NEVER commit this file with actual secret values to version control
# 2. Copy this file to .env and set your actual configuration values
# 3. Add .env to your .gitignore file
# 4. Use strong, randomly generated secrets for all security-related variables
# 5. Rotate secrets periodically following security best practices
# 6. Store production secrets in a secure secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# 7. Follow the principle of least privilege for all service accounts and API keys
#
# GENERATING SECURE SECRETS
# =========================
#
# For most secrets, use:
#   openssl rand -base64 32   (for base64-encoded secrets)
#   openssl rand -hex 32      (for hex-encoded secrets)
#
# For database passwords:
#   openssl rand -base64 48   (longer passwords for database access)
#
# For encryption keys:
#   openssl rand -hex 32      (256-bit keys for AES-256)
#
# ENVIRONMENT SPECIFIC CONFIGURATION
# ===================================
#
# - Development: Use local services, relaxed security for easier debugging
# - Staging: Mirror production but with test data
# - Production: Maximum security, monitoring, and performance optimization
#
# ═══════════════════════════════════════════════════════════════════════
#  Vantus Systems - Environment Configuration Template
# ═══════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────
#  Core Application Settings
# ───────────────────────────────────────────────────────────────────────

# Environment mode (development | production | test)
# Determines security settings, logging level, and performance optimizations
# development: Detailed error messages, relaxed security headers, verbose logging
# production: Minified assets, strict security, error suppression
# test: Optimized for automated testing
NODE_ENV=

# Server port
# Port number for the application server
# Default: 3000 for development, 80/443 for production (behind reverse proxy)
# Range: 1024-65535 (avoid privileged ports <1024 in development)
PORT=3000

# Primary domain (without www)
# Used for email links, redirects, and canonical URLs
# Should match your production domain exactly
# Example: "vantus.systems" or "app.yourdomain.com"
DEPLOY_DOMAIN="vantus.systems"

# Canonical URL of your site
# Base URL for NextAuth.js callbacks and OAuth providers
# Must include protocol (http:// or https://)
# In production: Should use https:// and match DEPLOY_DOMAIN
# In development: Can use http://localhost:3000
NEXTAUTH_URL="http://localhost:3000"

# ───────────────────────────────────────────────────────────────────────
#  Database Configuration
# ───────────────────────────────────────────────────────────────────────

# Database connection string
# Supports SQLite, PostgreSQL, MySQL, and other Prisma-compatible databases
# Development (SQLite): file:./dev.db
# Production (SQLite): file:/var/lib/vantus/prod.db
# PostgreSQL: postgresql://user:password@localhost:5432/database
# MySQL: mysql://user:password@localhost:3306/database
# For production: Use environment-specific credentials, not hardcoded values
# Connection pooling: Configured automatically by Prisma
DATABASE_URL="file:./prisma/dev.db"

# ───────────────────────────────────────────────────────────────────────
#  Security & Authentication
# ───────────────────────────────────────────────────────────────────────

# NextAuth.js secret for session signing (REQUIRED in production)
# Used for JWT token signing and session encryption
# Generate with: openssl rand -base64 32
# Minimum length: 32 bytes (44 characters in base64)
# Rotation: Should be rotated periodically (every 6-12 months)
NEXTAUTH_SECRET=

# MFA encryption key (REQUIRED in production)
# Used for encrypting/decrypting MFA secrets stored in database
# Generate with: openssl rand -hex 32
# Minimum length: 32 bytes (64 characters in hex)
# Rotation: Should be rotated carefully as it affects existing MFA setups
MFA_ENCRYPTION_KEY=

# CSRF protection secret (REQUIRED in production)
# Used for HMAC signing of CSRF tokens
# Generate with: openssl rand -base64 32
# Minimum length: 32 bytes (44 characters in base64)
# Rotation: Can be rotated without affecting existing sessions
CSRF_SECRET=

# Cron job authentication secret (REQUIRED in production)
# Used for authenticating cron job requests
# Generate with: openssl rand -base64 32
# Minimum length: 32 bytes (44 characters in base64)
# Rotation: Can be rotated without affecting user sessions
CRON_SECRET=

# Session encryption key (REQUIRED in production)
# Used for encrypting session data in database
# Generate with: openssl rand -base64 32
# Minimum length: 32 bytes (44 characters in base64)
# Rotation: Should be rotated carefully as it affects existing sessions
SESSION_ENCRYPTION_KEY=

# Rate limiting configuration
# Maximum login attempts per minute before rate limiting
RATE_LIMIT_MAX_ATTEMPTS="5"
# Rate limiting window in milliseconds
RATE_LIMIT_WINDOW_MS="60000"

# Password policy settings
# Minimum password entropy in bits (0-100)
PASSWORD_MIN_ENTROPY="30"
# Maximum password history to prevent reuse
PASSWORD_HISTORY_LIMIT="5"

# Security headers configuration
# Content Security Policy (CSP) - adjust based on your requirements
# NEXT_PUBLIC_CSP="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://*.splinetool.com; font-src 'self'; connect-src 'self' https://api.pwnedpasswords.com; frame-src 'self' https://*.splinetool.com; object-src 'none'; base-uri 'self'; form-action 'self'"

# Session management settings
# Maximum concurrent sessions per user
MAX_CONCURRENT_SESSIONS="3"
# Session timeout in days
SESSION_TIMEOUT_DAYS="30"
# Inactive session timeout in minutes
INACTIVE_SESSION_TIMEOUT_MINUTES="60"

# ───────────────────────────────────────────────────────────────────────
#  File Storage & Uploads
# ───────────────────────────────────────────────────────────────────────

# Directory for uploaded files (REQUIRED for on-prem deployment)
# For systemd: /var/lib/vantus/uploads (writable via StateDirectory)
# For development: ./uploads
# Ensure directory exists and has proper permissions (750 recommended)
# For Docker: Use a named volume mounted at this path
# File size limits: Configured in API routes (default 10MB)
# File type restrictions: Configured in upload handlers
UPLOADS_DIR="./uploads"

# Maximum file upload size in bytes
# Default: 10MB (10485760 bytes)
# Adjust based on your requirements
# Note: Also configure in your web server (nginx, etc.)
MAX_UPLOAD_SIZE="10485760"

# Allowed file types for uploads (comma-separated)
# Example: "image/jpeg,image/png,application/pdf"
# Leave empty to allow all types (not recommended for production)
ALLOWED_FILE_TYPES="image/jpeg,image/png,application/pdf,image/webp"

# ───────────────────────────────────────────────────────────────────────
#  Admin Account Bootstrap (for initial setup/seeding)
# ───────────────────────────────────────────────────────────────────────

# Admin user email for database seeding
# Only used during initial setup (prisma seed)
# After initial setup, this should be removed or changed
# Format: valid email address
ADMIN_BOOTSTRAP_EMAIL="admin@vantus.systems"

# Admin user password (CHANGE AFTER FIRST LOGIN!)
# Only used during initial setup
# Must meet password complexity requirements
# CHANGE THIS IMMEDIATELY AFTER FIRST LOGIN
# Consider using a temporary complex password and forcing reset
ADMIN_BOOTSTRAP_PASSWORD="admin"

# Enable/disable bootstrap account creation
# Set to "false" after initial setup to prevent accidental overwrites
BOOTSTRAP_ACCOUNT_ENABLED="true"

# ───────────────────────────────────────────────────────────────────────
#  Redis Configuration (REQUIRED for production job queue & rate limiting)
# ───────────────────────────────────────────────────────────────────────

# Redis connection URL (REQUIRED for BullMQ job queue in production)
# Format: redis://[username:password@]host:port[/db]
# For local dev: redis://localhost:6379
# For production: redis://user:pass@redis.example.com:6379/0
# Used for: Rate limiting, job queues, caching
# Connection pooling: Configured automatically by ioredis
# TLS: For production, use rediss:// for TLS connections
REDIS_URL="redis://localhost:6379"

# Redis password (if not in URL)
# Only needed if authentication is required and not specified in REDIS_URL
# REDIS_PASSWORD="your-redis-password"

# Redis TLS configuration
# Set to "true" to enable TLS for Redis connections
# REDIS_USE_TLS="false"

# Redis connection timeout in milliseconds
# REDIS_CONNECT_TIMEOUT="5000"

# Redis command timeout in milliseconds
# REDIS_COMMAND_TIMEOUT="3000"

# ───────────────────────────────────────────────────────────────────────
#  Optional: AWS S3 (for media uploads)
# ───────────────────────────────────────────────────────────────────────

# AWS Region
# AWS region where your S3 bucket is located
# Common regions: us-east-1, us-west-2, eu-west-1, ap-southeast-1
# AWS_REGION="us-east-1"

# AWS Credentials
# IAM user with S3 read/write permissions only (least privilege principle)
# Recommended: Use IAM roles for EC2 instances instead of access keys
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""

# S3 Bucket Name
# Name of your S3 bucket for file uploads
# Bucket naming rules: lowercase, no underscores, 3-63 characters
# S3_BUCKET_NAME=""

# S3 Endpoint (for custom/compatible services)
# For AWS: Leave empty (uses default AWS endpoint)
# For DigitalOcean Spaces: https://nyc3.digitaloceanspaces.com
# For other S3-compatible services: provider-specific endpoint
# S3_ENDPOINT=""

# S3 Force Path Style
# Set to "true" for DigitalOcean Spaces and other non-AWS providers
# S3_FORCE_PATH_STYLE="false"

# S3 ACL (Access Control List)
# Default: "private" - files are private by default
# Options: private, public-read, public-read-write, authenticated-read
# S3_ACL="private"

# ───────────────────────────────────────────────────────────────────────
#  E-Signature Provider Configuration (REQUIRED for contract signing)
# ───────────────────────────────────────────────────────────────────────

# E-signature provider (docusign | hellosign | none)
# Set to "none" to disable e-signature functionality
# docusign: DocuSign integration
# hellosign: HelloSign/Dropbox Sign integration
ESIGN_PROVIDER="none"

# DocuSign Settings (for ESIGN_PROVIDER=docusign)
# Integration key from DocuSign developer account
# DOCUSIGN_INTEGRATION_KEY=""
# User ID for API calls (GUID format)
# DOCUSIGN_USER_ID=""
# Account ID for API calls (GUID format)
# DOCUSIGN_ACCOUNT_ID=""
# Base URL for DocuSign API
# Production: https://www.docusign.net/restapi
# Development: https://demo.docusign.net/restapi
# DOCUSIGN_BASE_URL="https://demo.docusign.net/restapi"
# OAuth base URL for authentication
# DOCUSIGN_OAUTH_BASE_URL="https://account-d.docusign.com"
# Private key for JWT authentication (RSA key pair)
# Generate using: openssl genpkey -algorithm RSA -out private.key -pkeyopt rsa_keygen_bits:2048
# DOCUSIGN_PRIVATE_KEY=""

# HelloSign/Dropbox Sign Settings (for ESIGN_PROVIDER=hellosign)
# API key from HelloSign developer account
# HELLOSIGN_API_KEY=""
# Client ID for OAuth flows
# HELLOSIGN_CLIENT_ID=""

# E-signature webhook secret (REQUIRED for webhook validation)
# Used to verify webhook requests from e-signature providers
# Generate with: openssl rand -hex 32
# ESIGN_WEBHOOK_SECRET=""

# Webhook verification timeout in seconds
# ESIGN_WEBHOOK_TIMEOUT="5"

# Maximum webhook retries for failed processing
# ESIGN_WEBHOOK_MAX_RETRIES="3"

# ───────────────────────────────────────────────────────────────────────
#  Email Configuration (REQUIRED for production notifications)
# ───────────────────────────────────────────────────────────────────────

# Email service provider (smtp | sendgrid | mailgun | resend)
# smtp: Standard SMTP server
# sendgrid: SendGrid API
# mailgun: Mailgun API
# resend: Resend API
EMAIL_PROVIDER="smtp"

# SMTP Settings (for EMAIL_PROVIDER=smtp)
# SMTP server hostname or IP address
SMTP_HOST=""
# SMTP server port (25, 465 for SSL, 587 for TLS)
SMTP_PORT="587"
# Use SSL/TLS connection (true for 465, false for 587 with STARTTLS)
SMTP_SECURE="false"
# SMTP authentication username
SMTP_USER=""
# SMTP authentication password
SMTP_PASSWORD=""
# Default "From" address for outgoing emails
# Must be a verified domain/address for your SMTP provider
SMTP_FROM="noreply@vantus.systems"

# SMTP connection timeout in milliseconds
# SMTP_TIMEOUT="10000"

# SMTP connection pool size
# SMTP_POOL="true"

# SMTP maximum connections in pool
# SMTP_POOL_MAX="5"

# SendGrid Settings (for EMAIL_PROVIDER=sendgrid)
# API key from SendGrid dashboard
# SENDGRID_API_KEY=""

# Mailgun Settings (for EMAIL_PROVIDER=mailgun)
# API key from Mailgun control panel
# MAILGUN_API_KEY=""
# Mailgun domain (must be verified in Mailgun)
# MAILGUN_DOMAIN=""

# Resend Settings (for EMAIL_PROVIDER=resend)
# API key from Resend dashboard
# RESEND_API_KEY=""

# Email rate limiting
# Maximum emails per minute to prevent abuse
# EMAIL_RATE_LIMIT="60"

# Email template settings
# Default template for password reset emails
# EMAIL_TEMPLATE_RESET="default"
# Default template for MFA setup emails
# EMAIL_TEMPLATE_MFA="default"

# ───────────────────────────────────────────────────────────────────────
#  Optional: Monitoring & Analytics
# ───────────────────────────────────────────────────────────────────────

# Sentry DSN (optional)
# Data Source Name for Sentry error tracking
# Format: https://<key>@<project>.ingest.sentry.io/<project_id>
# NEXT_PUBLIC_SENTRY_DSN=""

# Sentry environment (matches NODE_ENV by default)
# NEXT_PUBLIC_SENTRY_ENVIRONMENT="development"

# Sentry traces sample rate (0.0 to 1.0)
# SENTRY_TRACES_SAMPLE_RATE="0.2"

# Google Analytics ID (optional)
# Google Analytics 4 Measurement ID
# Format: G-XXXXXXXXXX
# NEXT_PUBLIC_GA_ID=""

# Google Tag Manager ID (optional)
# Format: GTM-XXXXXX
# NEXT_PUBLIC_GTM_ID=""

# Application performance monitoring
# Enable detailed performance metrics
# APM_ENABLED="false"

# Logging configuration
# Log level (debug, info, warn, error)
LOG_LEVEL=

# Log file path (empty for console-only logging)
# LOG_FILE=""

# Maximum log file size in bytes before rotation
# LOG_MAX_SIZE="10485760" # 10MB

# Number of log files to keep
# LOG_MAX_FILES="5"

# ═══════════════════════════════════════════════════════════════════════
#  Configuration Best Practices
# ═══════════════════════════════════════════════════════════════════════
#
# SECURITY BEST PRACTICES
# =======================
# 1. Use separate secrets for different environments (dev, staging, prod)
# 2. Rotate secrets regularly (every 3-12 months depending on sensitivity)
# 3. Use IAM roles instead of access keys where possible
# 4. Enable MFA for all administrative accounts
# 5. Use the principle of least privilege for all service accounts
# 6. Monitor and audit access to sensitive configuration
#
# PERFORMANCE BEST PRACTICES
# ==========================
# 1. Use connection pooling for databases
# 2. Enable caching for frequently accessed data
# 3. Configure appropriate timeouts for external services
# 4. Monitor resource usage and adjust limits accordingly
# 5. Use CDN for static assets in production
#
# DEPLOYMENT BEST PRACTICES
# =========================
# 1. Use environment-specific configuration files
# 2. Validate configuration before starting application
# 3. Implement health checks and readiness probes
# 4. Use blue-green or canary deployments for zero-downtime updates
# 5. Monitor application health and performance post-deployment
#
# TROUBLESHOOTING
# ===============
# 1. "Invalid secret" errors: Verify all secrets are correctly set
# 2. Connection timeouts: Check network connectivity and firewall rules
# 3. Permission errors: Verify IAM roles and service account permissions
# 4. Rate limiting issues: Adjust rate limit settings or implement caching
# 5. Memory leaks: Monitor memory usage and implement proper cleanup
#
# SUPPORT
# =======
# For issues or questions, refer to:
# - Official documentation: https://docs.vantus.systems
# - Community forums: https://community.vantus.systems
# - Support portal: https://support.vantus.systems
#
# ═══════════════════════════════════════════════════════════════════════
#  End of Configuration Template
# ═══════════════════════════════════════════════════════════════════════
